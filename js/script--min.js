"use strict";let storageEmailVal,storageNameVal,link=document.querySelector(".contacts__button"),modal=document.querySelector(".contact-us"),close=modal.querySelector(".modal__close"),form=modal.querySelector(".contact-us__form"),name=form.querySelector("#contact-us__name"),email=form.querySelector("#contact-us__email"),letter=form.querySelector("#contact-us__text"),isStorageSupport=!0;try{storageEmailVal=localStorage.getItem("email"),storageNameVal=localStorage.getItem("name")}catch(e){isStorageSupport=!1}function closeModal(){modal.classList.remove("modal--error"),modal.classList.remove("modal--show"),modal.classList.add("modal--close")}function initMap(){let e=new google.maps.Map(document.querySelector("#map"),{center:{lat:59.939,lng:30.3218},zoom:17,styles:[{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{visibility:"on"},{hue:"#ff0000"},{saturation:"100"},{lightness:"-8"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#009DE0"},{visibility:"on"}]},{featureType:"water",elementType:"labels",stylers:[{color:"#ffffff"}]}]});new google.maps.Marker({position:{lat:59.938714,lng:30.323048},map:e,title:"Студия Nёrd's",icon:"img/bubble.svg"})}link.addEventListener("click",(function(e){e.preventDefault(),modal.classList.remove("modal--close"),modal.classList.add("modal--show"),storageNameVal?(name.value=storageNameVal,storageEmailVal&&(email.value=storageEmailVal),letter.focus()):name.focus()})),close.addEventListener("click",(function(e){e.preventDefault(),closeModal()})),window.addEventListener("keydown",(function(e){27===e.keyCode&&modal.classList.contains("modal--show")&&(e.preventDefault(),closeModal())})),form.addEventListener("submit",(function(e){email.value&&letter.value&&name.value?isStorageSupport&&(localStorage.setItem("email",email.value),name.value&&localStorage.setItem("name",name.value)):(e.preventDefault(),modal.classList.remove("modal--error"),modal.offsetWidth,modal.offsetWidth,modal.classList.add("modal--error"))}));try{let e=document.querySelector(".filter--cost");const t=e.querySelector("#price__thumb circle").r.baseVal.value;let l=e.querySelector("#price__track"),o=e.querySelector("#price__track--selected");const a=l.x1.baseVal.value-t,r=l.x2.baseVal.value-t;new Thumb("#price--min","#price__output--min",o.x1),new Thumb("#price--max","#price__output--max",o.x2);function Thumb(l,o,s){return(l=e.querySelector(l)).output=e.querySelector(o),l.rangeSelectedPoint=s,l.getPosition=function(){return this.x.baseVal.value},l.displayPrice=function(e){this.output.value=e},l.moveTo=function(e){e>r&&(e=r),e<a&&(e=a),this.rangeSelectedPoint.baseVal.value=e+t,this.x.baseVal.value=e;let l=e/r*this.output.max;l/=100,this.displayPrice(100*parseInt(l))},l.onmousedown=function(e){e.preventDefault;let t=e.clientX,l=this;document.onmousemove=function(e){let o=e.clientX-t;t=e.clientX,l.moveTo(l.getPosition()+o)},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}},l}}catch(e){console.log("No price range at this page")}try{let e=document.querySelector(".slider"),t=e.querySelectorAll(".slider__item"),l=e.querySelector(".slider__toggles");for(let e=0;e<t.length;e++){let o=document.createElement("li"),a=e+1,r=document.createElement("input");r.type="radio",r.name="slider",r.id="slider__toggle--"+a,r.classList.add("slider__toggle"),r.classList.add("visually-hidden"),1==a&&(r.checked=!0),r.addEventListener("change",(function(){let l="#"+t[e].id;document.location.href=l})),o.appendChild(r);let s=document.createElement("label");s.htmlFor=r.id,s.textContent="Перейти к  слайду №"+a,s.classList.add("slider__label"),o.appendChild(s),l.appendChild(o)}}catch(e){console.log("No slider at this page")}